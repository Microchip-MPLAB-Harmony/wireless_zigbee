<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: N_LinkTarget.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">N_LinkTarget.h File Reference</div>  </div>
</div>
<div class="contents">

<p>React to touchlink actions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_n___inter_pan_8h_source.html">N_InterPan.h</a>&quot;</code><br/>
<code>#include &quot;N_Types.h&quot;</code><br/>
</div>
<p><a href="_n___link_target_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_n___link_target___callback__t.html">N_LinkTarget_Callback_t</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13d17e56e5d3e1dd678279e249b3f1ce"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_TargetType_None" ref="a13d17e56e5d3e1dd678279e249b3f1ce" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_LinkTarget_TargetType_None</b>&#160;&#160;&#160;0x00u</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a76749f33251c9ee364dff91de0516c6f"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_TargetType_Touchlink" ref="a76749f33251c9ee364dff91de0516c6f" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>N_LinkTarget_TargetType_Touchlink</b>&#160;&#160;&#160;0x02u</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abbdda4069e6eff979970e46294f224f7"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_TargetType_t" ref="abbdda4069e6eff979970e46294f224f7" args="" -->
typedef uint8_t&#160;</td><td class="memItemRight" valign="bottom"><b>N_LinkTarget_TargetType_t</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e2902d1cfc09495b5a32994dadd3e39"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_Status_t" ref="a0e2902d1cfc09495b5a32994dadd3e39" args="" -->
typedef enum <a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989">N_LinkTarget_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>N_LinkTarget_Status_t</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n___link_target_8h.html#a60fcda5c32c998c4737cd6bb54f40ee2">N_LinkTarget_SetTargetTypeDone_t</a> )(<a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989">N_LinkTarget_Status_t</a> status)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a457ca478213a756635619da2233cb0af"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_Callback_t" ref="a457ca478213a756635619da2233cb0af" args="" -->
typedef struct <br class="typebreak"/>
<a class="el" href="struct_n___link_target___callback__t.html">N_LinkTarget_Callback_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>N_LinkTarget_Callback_t</b></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989">N_LinkTarget_Status_t</a> { <br/>
&#160;&#160;<a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989aab4ec88fd5efd7b37dfa1a11c68a8480">N_LinkTarget_Status_Ok</a>, 
<br/>
&#160;&#160;<a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989a993eab2273e1099449d25d4c78c9d8d0">N_LinkTarget_Status_Failure</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n___link_target_8h.html#a9e8bb397eda926fce8a32da2d415c9e1">N_LinkTarget_Subscribe</a> (const <a class="el" href="struct_n___link_target___callback__t.html">N_LinkTarget_Callback_t</a> *pCb)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n___link_target_8h.html#a3542020cfbb68dd62185aeff87d88c30">N_LinkTarget_SetTargetType</a> (N_LinkTarget_TargetType_t targetType, <a class="el" href="_n___link_target_8h.html#a60fcda5c32c998c4737cd6bb54f40ee2">N_LinkTarget_SetTargetTypeDone_t</a> pfDoneCallback)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n___link_target_8h.html#a6b4f520416d0d42957909dc03e04b862">N_LinkTarget_SetTouchlinkPriority</a> (bool priorityEnabled)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_n___link_target_8h.html#a4d4f36aa9e59e9fc8cce4db71256bcba">N_LinkTarget_AllowStealing</a> (bool allowStealing)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>React to touchlink actions. </p>
<p>A linking sequence consists roughly of the following steps: </p>
<div class="image">
<img src="N_LinkTarget_LinkingSequence.png" alt="N_LinkTarget_LinkingSequence.png"/>
</div>
<p>The N_LinkTarget component implements the software interface to implement the target-side of this.</p>
<h2><a class="anchor" id="IIL"></a>
Being Initiator and Target simultaneously</h2>
<dl class="user"><dt><b></b></dt><dd>When starting a linking action from 2 devices at the same time (e.g. linking two ZLL remotes), one of the devices should become target (to be decided by the application) and the other one should continue being an initiator. So when a device that is both target and initiator at the same time receives a scan request while it is scanning, the application can decide to abort scanning (and remain target) so it can be linked.</dd></dl>
<p>Only during the Scanning step, a device may be Target and Initiator at the same time. During the other steps, the device must give up being a Target.</p>
<dl class="author"><dt><b>Author:</b></dt><dd>Microchip Corporation: <a href="http://www.microchip.com">http://www.microchip.com</a> <br/>
 Support email: <a href="mailto:support@microchip.com">support@microchip.com</a></dd></dl>
<p>Copyright (c) 2018, Microchip Corporation. All rights reserved. Licensed under Microchip's Limited License Agreement. </p>

<p>Definition in file <a class="el" href="_n___link_target_8h_source.html">N_LinkTarget.h</a>.</p>
</div><hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="a60fcda5c32c998c4737cd6bb54f40ee2"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_SetTargetTypeDone_t" ref="a60fcda5c32c998c4737cd6bb54f40ee2" args=")(N_LinkTarget_Status_t status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="_n___link_target_8h.html#a60fcda5c32c998c4737cd6bb54f40ee2">N_LinkTarget_SetTargetTypeDone_t</a>)(<a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989">N_LinkTarget_Status_t</a> status)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Completion callback for N_LinkTarget_Enable. </p>

<p>Definition at line <a class="el" href="_n___link_target_8h_source.html#l00089">89</a> of file <a class="el" href="_n___link_target_8h_source.html">N_LinkTarget.h</a>.</p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="a2fa226b1e8ca2f447e3a763973cdc989"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_Status_t" ref="a2fa226b1e8ca2f447e3a763973cdc989" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="_n___link_target_8h.html#a2fa226b1e8ca2f447e3a763973cdc989">N_LinkTarget_Status_t</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="a2fa226b1e8ca2f447e3a763973cdc989aab4ec88fd5efd7b37dfa1a11c68a8480"></a><!-- doxytag: member="N_LinkTarget_Status_Ok" ref="a2fa226b1e8ca2f447e3a763973cdc989aab4ec88fd5efd7b37dfa1a11c68a8480" args="" -->N_LinkTarget_Status_Ok</em>&nbsp;</td><td>
<p>The action succeeded. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="a2fa226b1e8ca2f447e3a763973cdc989a993eab2273e1099449d25d4c78c9d8d0"></a><!-- doxytag: member="N_LinkTarget_Status_Failure" ref="a2fa226b1e8ca2f447e3a763973cdc989a993eab2273e1099449d25d4c78c9d8d0" args="" -->N_LinkTarget_Status_Failure</em>&nbsp;</td><td>
<p>The action failed. </p>
</td></tr>
</table>
</dd>
</dl>

<p>Definition at line <a class="el" href="_n___link_target_8h_source.html#l00078">78</a> of file <a class="el" href="_n___link_target_8h_source.html">N_LinkTarget.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a9e8bb397eda926fce8a32da2d415c9e1"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_Subscribe" ref="a9e8bb397eda926fce8a32da2d415c9e1" args="(const N_LinkTarget_Callback_t *pCb)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void N_LinkTarget_Subscribe </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_n___link_target___callback__t.html">N_LinkTarget_Callback_t</a> *&#160;</td>
          <td class="paramname"><em>pCb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Subscribe to indication callbacks from this component. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">pCb</td><td>Pointer to structure with callback functions </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a3542020cfbb68dd62185aeff87d88c30"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_SetTargetType" ref="a3542020cfbb68dd62185aeff87d88c30" args="(N_LinkTarget_TargetType_t targetType, N_LinkTarget_SetTargetTypeDone_t pfDoneCallback)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void N_LinkTarget_SetTargetType </td>
          <td>(</td>
          <td class="paramtype">N_LinkTarget_TargetType_t&#160;</td>
          <td class="paramname"><em>targetType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_n___link_target_8h.html#a60fcda5c32c998c4737cd6bb54f40ee2">N_LinkTarget_SetTargetTypeDone_t</a>&#160;</td>
          <td class="paramname"><em>pfDoneCallback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the link target type. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">targetType</td><td>The target type (none, touchlink) </td></tr>
    <tr><td class="paramname">pfDoneCallback</td><td>Pointer to function called when the asynchronous call is done</td></tr>
  </table>
  </dd>
</dl>
<p>For a router this is typically called during initialisation to allow touchlinking. For an end-device this is not possible as Inter-Pan communication cannot be combined with normal ZigBee communication, so touchlinking should only be allowed for a short period after a explicit user action.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The target type is automatically set to None if the device is linked to a new network, when the network settings are updated. On a router the <a class="el" href="struct_n___link_target___callback__t.html#ad3ef6f408d1c6c7bebeb3b6a0eda4cf3">N_LinkTarget_Callback_t::JoinNetworkIndication</a> and <a class="el" href="struct_n___link_target___callback__t.html#a156f6a0a4b5d2c9d0549539c6ad29138">N_LinkTarget_Callback_t::UpdateNetworkIndication</a> callbacks can be used to detect this and immediately allow touchlinking again. On an end-device touchlinking should not be enabled again until a new explicit user action. </dd></dl>

</div>
</div>
<a class="anchor" id="a6b4f520416d0d42957909dc03e04b862"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_SetTouchlinkPriority" ref="a6b4f520416d0d42957909dc03e04b862" args="(bool priorityEnabled)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void N_LinkTarget_SetTouchlinkPriority </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>priorityEnabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Enable/Disable Touchlink priority </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">priorityEnabled</td><td>Enable touchlink priority</td></tr>
  </table>
  </dd>
</dl>
<p>For touchlink targets the priority can be set to request priority during touchlink operation Zll profile specification 7.1.2.3.1.4 ZLL information field. touchlink priority request. </p>

</div>
</div>
<a class="anchor" id="a4d4f36aa9e59e9fc8cce4db71256bcba"></a><!-- doxytag: member="N_LinkTarget.h::N_LinkTarget_AllowStealing" ref="a4d4f36aa9e59e9fc8cce4db71256bcba" args="(bool allowStealing)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void N_LinkTarget_AllowStealing </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowStealing</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allow or disallow stealing </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">allowStealing</td><td>Set to TRUE to allow stealing (default), or FALSE to disallow it.</td></tr>
  </table>
  </dd>
</dl>
<p>Stealing means: being pulled from an existing network into another network. When stealing is disallowed, the device can only be linked (i.e., reacts to a valid incoming Interpan Join/Start request) when the device is factory new. If not factory new, an error is returned to the initiator. </p>

</div>
</div>
</div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
