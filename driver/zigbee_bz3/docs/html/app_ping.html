<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: Ping-Pong Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Ping-Pong Application </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>This application shows how to make the nodes to process multiple data requests. It also demonstrates the binding feature of the ZigBee PRO specification for service discovery and data transmission.</p>
<p>Up to 4 nodes can be used in the application. A data frame originated from one of the nodes travels across the network in chain-like manner with each node passing it to the next one. The final node in the chain passes the message to the first node thus starting a new transmission round in the circle.</p>
<p>To use the binding feature set <b>APP_USE_BINDING</b> to 1 in the <code>configuration.h</code> file . In such case all nodes will have stochastic short addresses (that is, set to random values except for the coordinator, which always has the 0x0000 address) unknown to each other in advance. Each node supports a cluster with the identifier deduced from the <b>APP_DEVICE_NWK_ADDRESS</b> parameter.</p>
<p>If <b>APP_USE_BINDING</b> is set 0, nodes will use predefined short addresses deduced from the <b>APP_DEVICE_NWK_ADDRESS</b> parameter, and a message will be transmitted to these known addresses.</p>
<p>The node order in the chain is determined by the short addresses.</p>
<p>A device joins the network automatically on startup. If <b>APP_USE_BINDING</b> is true then right after the network join devices start looking for the neighbor peers in the chain and bind to them when found.</p>
<p>Sending data starts after a certain delay when all devices entered the network or bound to each other. A data frame is passed over the network circularly: 012301... and so forth.</p>
<p>If <b>APP_USE_BINDING</b> is true data transmission can fail due to communication error, router's overload or some other reason. In such case data circulation stops because target node cannot forward it further. Data transmission can be reinitiated by pressing <code>SW2</code> on any node. If binding is not used data transmission is guaranteed by acknowledgement requests.</p>
<h2><a class="anchor" id="leds"></a>
LED Indications</h2>
<p>If LEDs are present on the board, then they are used by the application:</p>
<ul>
<li>The green LED turned on indicates that the network has started successfully. </li>
<li>The red LED turned on indicates successful completion of binding procedure. </li>
<li>The yellow LED is blinking during the process of data transfer, and is OFF after the transmission is completed.</li>
</ul>
<h2><a class="anchor" id="config_params"></a>
Configuration parameters</h2>
<table class="doxtable">
<tr>
<td><b>APP_USE_BINDING</b></td><td>Specifies whether or not the binding feature is used </td></tr>
<tr>
<td><b>APP_DEVICE_NWK_ADDRESS</b></td><td>Determines the node order in the chain; is used to set short addresses if binding is not used and cluster identifiers is binding is used. </td></tr>
<tr>
<td><b>APP_FINAL_DEVICE</b></td><td>Specifies the final device in the chain </td></tr>
<tr>
<td><b>TIMER_STARTING_NETWORK</b></td><td>The LED blinking interval during network start (ms) </td></tr>
<tr>
<td><b>TIMER_FW_DELAY</b></td><td>The interval before forwarding the received packet (ms) </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a2719d5610524a9c4fbb963422a3e861b" title="32-bit mask of channels to be scanned before network is started">CS_CHANNEL_MASK</a></td><td>Specifies a channel mask to be used for network operation. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a04dae8e9e254f46b2d6275aa22a71bd1" title="Number of a channel page to be used. Ignored in the case of AT86RF230/230B/231 RF chip...">CS_CHANNEL_PAGE</a></td><td>Specifies a channel page to be used. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#ad913e01b52dd44a469260af694c6fd84" title="Extended PAN ID of the network to which the device should join.">CS_EXT_PANID</a></td><td>Specifies the network extended PANID. Should be unique at a given location. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a330d543f324150e27474f40c950333c2" title="Custome Passive ack threshold.">CS_UID</a></td><td>The extended address for platforms where it is not available via the special UID chip or an external EEPROM. </td></tr>
</table>
<p>The description of parameters common for all applications can be found in <a href="Sample_app.html#ConfigParam">Sample Applications Overview</a>. ConfigServer parameters are described in the <a href="">Configuration Server</a> section.</p>
<p>The source code of the Pingpong application is located in the <code>[SDK]\Sample&#160;Applications\Pingpong</code> directory. </p>
</div></div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
