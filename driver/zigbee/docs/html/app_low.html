<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: Low Power Networking Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Low Power Networking Application </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>This sample application demonstrates following BitCloud and ZigBee PRO functionalities:</p>
<ul>
<li>Power management scheme: scheduled device awakening; </li>
<li>Data collection from low-power devices on the central coordinator node; </li>
<li>Data delivery from parent device (coordinator in this example) to children end devices via polling mechanism.</li>
</ul>
<p>One coordinator and at least one end device shall be engaged. Nodes are identified by their short (network) addresses as assigned to the <b>APP_NWK_NODE_ADDRESS</b> parameter in the <code>configuration.h</code> <a href="file:">file:</a></p>
<ul>
<li>The coordinator node shall have <b>APP_NWK_NODE_ADDRESS</b> set to <code>0x0000</code>. </li>
<li>End device nodes have non-zero short addresses; </li>
<li>All nodes in the network shall have unique short addresses. Thus firmware for each device shall be recompiled with a particular value of <b>APP_NWK_NODE_ADDRESS</b></li>
</ul>
<p>After the application is loaded to the target board, the network start procedure is initiated on the device automatically.</p>
<p>After joining the network an end device transmits stub sensor data to the coordinator and enters the sleep mode. Then it periodically wakes up with the <a class="el" href="cs_defaults_8h.html#af9a5ae0ebfa0d1b3edb25e8acb8738fc" title="End device sleep period given in milliseconds.">CS_END_DEVICE_SLEEP_PERIOD</a> interval and sends sensor data to the coordinator. After transmission is completed the end device falls asleep again.</p>
<p>Upon a data frame reception the coordinator node forwards it to the USB interface. Thus collected information can be observed in the terminal window (e.g. Windows HyperTerminal). See <a href="Sample_app.html#Connection">COM port connection settings</a>.</p>
<p>The coordinator is also able to configure the type of the sensor that end devices will emulate for their data reports. By default a stub temperature value is sent from each end device. Periodically with a 20 seconds interval a command to switch to the next sensor is sent from the coordinator consecutively to all children end devices in a unicast manner. The target sensor is switched in the following order upon each 20 seconds interval: temperature sensorbattery statuslight sensortemperature sensor.</p>
<p>If buttons are available on the board (for example, on the Meshbean board), pressing the <code>SW2</code> button causes</p>
<ul>
<li>interrupted wake up and extra sensor data delivery for an end device </li>
<li>out-of-turn switch of the sensor type for the coordinator</li>
</ul>
<p>Note that if an end device is sleeping when coordinator decides to swith the sensor, the switch command frame is buffered on the parent node (in this example, the coordinator) and delivered to the end device when it wakes up and retrieves it via the polling mechanism.</p>
<h2><a class="anchor" id="leds"></a>
LED Indications</h2>
<p>If LEDs are present on the board, then they are used by the application:</p>
<ul>
<li>The green LED (if present on the board) is periodically blinking with a 500ms interval when the device is joining the network and is ON if it is in the network and awake. </li>
<li>A flashing red LED indicates data transmission, while on the coordinator a yellow LED indicates the data reception.</li>
</ul>
<h2><a class="anchor" id="config_params"></a>
Configuration parameters</h2>
<table class="doxtable">
<tr>
<td><b>APP_NWK_NODE_ADDRESS</b></td><td>Specifies the device's short address. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a61ca65434a24b29c36a157f1e7fbf848" title="Determines whether the static or automatic addressing mode will be used for the short address...">CS_NWK_UNIQUE_ADDR</a></td><td>Specifies whether the short address is set to a predefined value or to a random value; is set to <code>1</code> by the application.  </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#af9a5ae0ebfa0d1b3edb25e8acb8738fc" title="End device sleep period given in milliseconds.">CS_END_DEVICE_SLEEP_PERIOD</a></td><td>The duration of the end device sleep period given in milliseconds. Should be the same on parent and children nodes. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a2719d5610524a9c4fbb963422a3e861b" title="32-bit mask of channels to be scanned before network is started">CS_CHANNEL_MASK</a></td><td>Specifies a channel mask to be used for network operation. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a04dae8e9e254f46b2d6275aa22a71bd1" title="Number of a channel page to be used. Ignored in the case of AT86RF230/230B/231 RF chip...">CS_CHANNEL_PAGE</a></td><td>Specifies a channel page to be used. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#ad913e01b52dd44a469260af694c6fd84" title="Extended PAN ID of the network to which the device should join.">CS_EXT_PANID</a></td><td>Specifies the network extended PANID. Should be unique at a given location. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a330d543f324150e27474f40c950333c2" title="Custome Passive ack threshold.">CS_UID</a></td><td>The extended address for platforms where it is not available via the special UID chip or an external EEPROM. </td></tr>
</table>
<p>The description of parameters common for all applications can be found in <a href="Sample_app.html#ConfigParam">Sample Applications Overview</a>. ConfigServer parameters are described in the <a href="configserver.html">Configuration Server</a> section.</p>
<p>The source code of the Low Power application is located in the <code>[SDK]\Sample&#160;Applications\LowPower</code> directory. </p>
</div></div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
