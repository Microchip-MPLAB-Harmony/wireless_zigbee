<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: WSNDemo Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">WSNDemo Application </div>  </div>
</div>
<div class="contents">
<div class="textblock"><p>The WSNDemo application demonstrates wireless sensor network (WSN) organization and sensor data collection from network devices on the central coordinator node.The WSNMonitor GUI application can be used on a PC to display the network topology and sensor data in an easy-to-interpret graphical form.</p>
<p>The device type is defined by the <b>APP_DEVICE_TYPE</b> parameter thus firmware for each device type shall be recompiled with updated value of the <b>APP_DEVICE_TYPE</b> parameter.</p>
<p>Network start procedure is initiated automatically after the device powers up. The coordinator organizes the wireless network according to settings in the <code>configuration.h</code> file while routers and end devices try to join the network with specified parameters.</p>
<p>After the network join each node starts periodically sending data packets containing node information and sensor measurements with the <b>APP_TIMER_SENDING_PERIOD</b> interval to the coordinator. The coordinator receives data frames and forwards them to a PC via the USART interface. It also periodically sends own sensor data directly to the serial port.</p>
<p>To observe WSN activities graphically the WSN Monitor GUI application should be started on the PC the coordinator is connected to.</p>
<p>In order to use standard security mechanism described in ZigBee specification, WSNDemo shall be compiled with properly configured <a href="Sample_app.html#Security">security-related parameters</a>.</p>
<h2><a class="anchor" id="leds"></a>
LED Indications</h2>
<p>If LEDs are present on the board, then they are used by the application:</p>
<ul>
<li>The red/D2/blue LED is periodically blinking with the 500ms interval when the device is joining the network and is ON if it is in the network. Once the device enters the network, the red/D2/blue LED stops blinking and becomes constantly ON while the node is in the network and awake. </li>
<li>The green/D4/red LED flashes during wireless transmission. </li>
<li>The yellow/D3 LED indicates data frame reception.</li>
</ul>
<h2><a class="anchor" id="config_params"></a>
Configuration parameters</h2>
<table class="doxtable">
<tr>
<td><b>APP_DEVICE_TYPE</b></td><td>Specifies the device type. </td></tr>
<tr>
<td><b>APP_TIMER_SENDING_PERIOD</b></td><td>The time interval used for periodic sensor data transmissions. </td></tr>
<tr>
<td><b>APP_THRESHOLD_FAILED_TRANSMISSION</b></td><td>The number of failed transmissions after which the node leaves the network. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a2df225a416b19f639fb9b3bcf1ca8d8a" title="Device&#39;s short address if CS_NWK_UNIQUE_ADDR equals 1.">CS_NWK_ADDR</a></td><td>Specifies the node's short address. Can be used only with <a class="el" href="cs_defaults_8h.html#a61ca65434a24b29c36a157f1e7fbf848" title="Determines whether the static or automatic addressing mode will be used for the short address...">CS_NWK_UNIQUE_ADDR</a> set to <code>1</code>. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a61ca65434a24b29c36a157f1e7fbf848" title="Determines whether the static or automatic addressing mode will be used for the short address...">CS_NWK_UNIQUE_ADDR</a></td><td>Specifies whether the short address is set to a predefined value or to a random value; is set to <code>1</code> by the application. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#af9a5ae0ebfa0d1b3edb25e8acb8738fc" title="End device sleep period given in milliseconds.">CS_END_DEVICE_SLEEP_PERIOD</a></td><td>The duration of the end device sleep period given in milliseconds. Should be the same on parent and children nodes. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a2719d5610524a9c4fbb963422a3e861b" title="32-bit mask of channels to be scanned before network is started">CS_CHANNEL_MASK</a></td><td>Specifies a channel mask to be used for network operation. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a04dae8e9e254f46b2d6275aa22a71bd1" title="Number of a channel page to be used. Ignored in the case of AT86RF230/230B/231 RF chip...">CS_CHANNEL_PAGE</a></td><td>Specifies a channel page to be used. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#ad913e01b52dd44a469260af694c6fd84" title="Extended PAN ID of the network to which the device should join.">CS_EXT_PANID</a></td><td>Specifies the network extended PANID. Should be unique at a given location. </td></tr>
<tr>
<td><a class="el" href="cs_defaults_8h.html#a330d543f324150e27474f40c950333c2" title="Custome Passive ack threshold.">CS_UID</a></td><td>The extended address for platforms where it is not available via the special UID chip or an external EEPROM. </td></tr>
</table>
<p>The description of parameters common for all applications can be found in <a href="Sample_app.html#ConfigParam">Sample Applications Overview</a>. ConfigServer parameters are described in the <a href="configserver.html">Configuration Server</a> section.</p>
<p>The source code of the WSNDemo application is located in yhe <code>[SDK]\Sample&#160;Applications\WSNDemo</code> directory.</p>
<p><a class="anchor" id="WSN_Monitor"></a> </p>
<h2><a class="anchor" id="wsn_monitor"></a>
WSNMonitor</h2>
<p>WSNMonitor is a PC-based GUI diagnostic application for WSNDemo used to display network topology and other information about the network. To install the program run <code>WSNMonitorSetup.exe</code> located at <code>[SDK]\Evaluation&#160;Tools\WSNDemo&#160;(WSN&#160;Monitor)\</code>.</p>
<p>WSNMonitor displays the network topology in real time and updates it automatically as the nodes join or leave. The nodes are represented by icons with the node data tips. The links between the nodes are tipped with the link quality data. Sensor data for each node is recorded and may be visualized in graphical and table formats.</p>
<p>On WSNMonitor startup a proper communication port should be selected using the serial port settings button from the toolbar. Other program menu and toolbar items can be used to control the node and topology outlook.</p>
<p>A typical WSN Monitor screen is shown in the figure below.</p>
<div class="image">
<img src="wsnmon.jpg" alt="wsnmon.jpg" border="0" width="768" height="568"/>
</div>
<p>&#160; </p>
</div></div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
