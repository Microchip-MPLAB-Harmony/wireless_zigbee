<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: sysTaskManager.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">sysTaskManager.h</div>  </div>
</div>
<div class="contents">
<a href="sys_task_manager_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*************************************************************************/</span>
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef _TASKMANAGER_H</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define _TASKMANAGER_H</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="sys_types_8h.html" title="The header file describes global system types and pre-processor words which depends on compiler or pl...">sysTypes.h</a>&gt;</span>
<a name="l00022"></a>00022 <span class="preprocessor">#include &lt;<a class="code" href="atomic_8h.html" title="The header file describes the atomic sections.">atomic.h</a>&gt;</span>
<a name="l00023"></a>00023 
<a name="l00026"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49">00026</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00027"></a>00027 {
<a name="l00028"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a418bf8609f9318444ead25e6a6b9952e">00028</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a418bf8609f9318444ead25e6a6b9952e" title="Task ID of the MAC-PHY-HWD layer.">MAC_PHY_HWD_TASK_ID</a> = 1 &lt;&lt; 0, 
<a name="l00029"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a261da6a015a10cf5373c852ca8e076fc">00029</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a261da6a015a10cf5373c852ca8e076fc" title="Task ID of HAL (Hardware Abstraction Layer)">HAL_TASK_ID</a>         = 1 &lt;&lt; 1, 
<a name="l00030"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a9bbc0495ebedfd926d06d781264ddfd5">00030</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a9bbc0495ebedfd926d06d781264ddfd5" title="Task ID of the MAC-HWI layer (a part of MAC independent of radio)">MAC_HWI_TASK_ID</a>     = 1 &lt;&lt; 2, 
<a name="l00031"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a2c5871d8f1ffca365e7358e8c578c9dd">00031</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a2c5871d8f1ffca365e7358e8c578c9dd" title="Task ID of the NWK layer.">NWK_TASK_ID</a>         = 1 &lt;&lt; 3, 
<a name="l00032"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49adc1e55ba367adce417a3866fd902cd13">00032</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49adc1e55ba367adce417a3866fd902cd13" title="Task ID of the ZDO layer.">ZDO_TASK_ID</a>         = 1 &lt;&lt; 4, 
<a name="l00033"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49abdf18848bfb160873a83db11eacc10d2">00033</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49abdf18848bfb160873a83db11eacc10d2" title="Task ID of the APS layer.">APS_TASK_ID</a>         = 1 &lt;&lt; 5, 
<a name="l00034"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49abe30a7735a8b03b415912d1cdd942312">00034</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49abe30a7735a8b03b415912d1cdd942312" title="Task ID of the ZGP layer.">ZGP_TASK_ID</a>         = 1 &lt;&lt; 6, 
<a name="l00035"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a045d4937c51fa190fa6043a52b7327d0">00035</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a045d4937c51fa190fa6043a52b7327d0" title="Task ID of Security Service Provider.">SSP_TASK_ID</a>         = 1 &lt;&lt; 7, 
<a name="l00036"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a2fa0108d2a103ccf18bc97a2aa3b802f">00036</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a2fa0108d2a103ccf18bc97a2aa3b802f" title="Task ID of the Trust Center component.">TC_TASK_ID</a>          = 1 &lt;&lt; 8, 
<a name="l00037"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49aae3177992910921159ffa514d18ea5df">00037</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49aae3177992910921159ffa514d18ea5df" title="Task ID of the Border Support Package layer.">BSP_TASK_ID</a>         = 1 &lt;&lt; 9, 
<a name="l00038"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49ae062166d6b9bd7b6a4d7ed27c8d7ca31">00038</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49ae062166d6b9bd7b6a4d7ed27c8d7ca31" title="Task ID of the ZAppSI component.">ZSI_TASK_ID</a>         = 1 &lt;&lt; 0x0A, 
<a name="l00039"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a742ab7b695f66f04274747ef4a64bca6">00039</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a742ab7b695f66f04274747ef4a64bca6" title="Task ID of ZigBee Cluster Library.">ZCL_TASK_ID</a>         = 1 &lt;&lt; 0x0B, 
<a name="l00040"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a0cb94b5354e027cd548df3946a61a596">00040</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a0cb94b5354e027cd548df3946a61a596" title="Service Task ID.">ZLL_TASK_ID</a>         = 1 &lt;&lt; 0x0C, 
<a name="l00041"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a55843692403cb558c08beea668d7622f">00041</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a55843692403cb558c08beea668d7622f" title="Task ID of the application.">APL_TASK_ID</a>         = 1 &lt;&lt; 0x0D, 
<a name="l00042"></a><a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a69598b208587c4ac99088c9d9173e18f">00042</a>   <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49a69598b208587c4ac99088c9d9173e18f" title="Task ID of the Persistent Data Server component.">PDS_TASK_ID</a>         = 1 &lt;&lt; 0x0E, 
<a name="l00043"></a>00043   ZGP_DSTUB_TASK_ID   = 1 &lt;&lt; 0x0F, <span class="comment">// !&lt;Task ID of the ZGP Dstub component</span>
<a name="l00044"></a>00044 } <a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49">SYS_TaskId_t</a>;
<a name="l00045"></a>00045 
<a name="l00047"></a><a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cd">00047</a> <span class="keyword">typedef</span> <span class="keyword">enum</span>
<a name="l00048"></a>00048 {
<a name="l00049"></a><a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cda51da55ca5625e2a7c23dd0e06031c968">00049</a>   <a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cda51da55ca5625e2a7c23dd0e06031c968" title="Initialization is a success.">INIT_SUCCES</a>    = 1 &lt;&lt; 0, 
<a name="l00050"></a><a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cda16b31e6ce528945ca50bd35d9d5d5920">00050</a>   <a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cda16b31e6ce528945ca50bd35d9d5d5920" title="Radio has not responded.">RF_NOT_RESPOND</a> = 1 &lt;&lt; 1, 
<a name="l00051"></a>00051 } <a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cd" title="Possible results of system&#39;s initialization.">SYS_InitStatus_t</a>;
<a name="l00052"></a>00052 
<a name="l00057"></a>00057 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="sys_task_manager_8h.html#aec14264f3afa11a970347e765c44d9ef">APL_TaskHandler</a>(<span class="keywordtype">void</span>);
<a name="l00058"></a>00058 <span class="comment">// \cond internal</span>
<a name="l00060"></a>00060 <span class="comment"></span><span class="keyword">extern</span> <span class="keywordtype">void</span> HAL_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00062"></a>00062 <span class="keyword">extern</span> <span class="keywordtype">void</span> BSP_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00064"></a>00064 <span class="keyword">extern</span> <span class="keywordtype">void</span> MAC_PHY_HWD_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00066"></a>00066 <span class="keyword">extern</span> <span class="keywordtype">void</span> MAC_HWI_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00068"></a>00068 <span class="keyword">extern</span> <span class="keywordtype">void</span> NWK_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00070"></a>00070 <span class="keyword">extern</span> <span class="keywordtype">void</span> ZDO_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00072"></a>00072 <span class="keyword">extern</span> <span class="keywordtype">void</span> APS_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00074"></a>00074 <span class="keyword">extern</span> <span class="keywordtype">void</span> SSP_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00076"></a>00076 <span class="keyword">extern</span> <span class="keywordtype">void</span> TC_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00078"></a>00078 <span class="keyword">extern</span> <span class="keywordtype">void</span> ZSI_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00080"></a>00080 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="zcl_task_manager_8h.html#aabaa7a7f1451282cf773b0791f6e04fa" title="Task Manager task handler function.">ZCL_TaskHandler</a>(<span class="keywordtype">void</span>);
<a name="l00082"></a>00082 <span class="keyword">extern</span> <span class="keywordtype">void</span> ZLL_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00084"></a>00084 <span class="keyword">extern</span> <span class="keywordtype">void</span> <a class="code" href="zgpd_manager_8h.html#abe009ad994a4081a89111a6ecedbb024" title="zgp Main task handler">ZGP_TaskHandler</a>(<span class="keywordtype">void</span>);
<a name="l00086"></a>00086 <span class="keyword">extern</span> <span class="keywordtype">void</span> ZGP_Dstub_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00088"></a>00088 <span class="keyword">extern</span> <span class="keywordtype">bool</span> RF_Init(<span class="keywordtype">void</span>);
<a name="l00090"></a>00090 <span class="keyword">extern</span> <span class="keywordtype">void</span> PDS_TaskHandler(<span class="keywordtype">void</span>);
<a name="l00091"></a>00091 
<a name="l00093"></a>00093 <span class="keyword">extern</span> <span class="keywordtype">void</span> MAC_PHY_HWD_ForceTaskHandler(<span class="keywordtype">void</span>);
<a name="l00095"></a>00095 <span class="keyword">extern</span> <span class="keywordtype">void</span> MAC_HWI_ForceTaskHandler(<span class="keywordtype">void</span>);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097 <span class="comment">/* The bitmask of posted task with bits&#39; corresponding to particular stack layers.</span>
<a name="l00098"></a>00098 <span class="comment">A bit becomes set to 1 in the bitmask when the SYS_PostTask() is called with the</span>
<a name="l00099"></a>00099 <span class="comment">task ID of the corresponding layer. A bit is dropped after calling the layer&#39;s task</span>
<a name="l00100"></a>00100 <span class="comment">handler function to process the posted task. */</span>
<a name="l00101"></a>00101 <span class="keyword">extern</span> <span class="keyword">volatile</span> uint16_t SYS_taskFlag;
<a name="l00102"></a>00102 <span class="comment">// \endcond</span>
<a name="l00103"></a>00103 
<a name="l00104"></a>00104 <span class="comment">/* Mask of enabled system tasks. Default value - 0xFFFF (All tasks are enabled). */</span>
<a name="l00105"></a>00105 <span class="keyword">extern</span> uint16_t SYS_taskMask;
<a name="l00106"></a>00106 
<a name="l00107"></a>00107 <span class="comment">/**************************************************************************************/</span>
<a name="l00117"></a>00117 <span class="comment">/*</span>
<a name="l00118"></a>00118 <span class="comment">IDs of the tasks are listed in the SYS_TaskId enum. Each task has its own priority and is called</span>
<a name="l00119"></a>00119 <span class="comment">only if there is no any task with higher priority. A handler is called when respective task can be run.</span>
<a name="l00120"></a>00120 <span class="comment">Each task has its own task handler. Correspondence between tasks and handlers is listed below:  \n</span>
<a name="l00121"></a>00121 <span class="comment">HAL - HAL_TaskHandler()                 \n</span>
<a name="l00122"></a>00122 <span class="comment">BSP - BSP_TaskHandler()                 \n</span>
<a name="l00123"></a>00123 <span class="comment">MAC_PHY_HWD - MAC_PHY_HWD_TaskHandler() \n</span>
<a name="l00124"></a>00124 <span class="comment">MAC_HWI - MAC_HWI_TaskHandler()         \n</span>
<a name="l00125"></a>00125 <span class="comment">ZGP - ZGP_TaskHandler()                 \n</span>
<a name="l00126"></a>00126 <span class="comment">NWK - NWK_TaskHandler()                 \n</span>
<a name="l00127"></a>00127 <span class="comment">ZDO - ZDO_TaskHandler()                 \n</span>
<a name="l00128"></a>00128 <span class="comment">APS - APS_TaskHandler()                 \n</span>
<a name="l00129"></a>00129 <span class="comment">APL - APL_TaskHandler()                 \n</span>
<a name="l00130"></a>00130 <span class="comment">*/</span>
<a name="l00131"></a><a class="code" href="group__sys.html#ga19cb63c28d94c2870db54ef53ba2ccd3">00131</a> INLINE <span class="keywordtype">void</span> <a class="code" href="group__sys.html#ga19cb63c28d94c2870db54ef53ba2ccd3" title="Posts a task to the task manager, which is later processed by the task handler of the corresponding s...">SYS_PostTask</a>(<a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49">SYS_TaskId_t</a> taskId)
<a name="l00132"></a>00132 {
<a name="l00133"></a>00133 <span class="comment">//\cond internal</span>
<a name="l00134"></a>00134   ATOMIC_SECTION_ENTER
<a name="l00135"></a>00135    SYS_taskFlag |= taskId;
<a name="l00136"></a>00136   ATOMIC_SECTION_LEAVE
<a name="l00137"></a>00137 <span class="comment">//\endcond</span>
<a name="l00138"></a>00138 }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="comment">/***************************************************************************/</span>
<a name="l00145"></a><a class="code" href="sys_task_manager_8h.html#a452abbc6e6327923894fc53e7ed9dba7">00145</a> INLINE <span class="keywordtype">void</span> <a class="code" href="sys_task_manager_8h.html#a452abbc6e6327923894fc53e7ed9dba7" title="Disables specified task.">SYS_DisableTask</a>(<a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49">SYS_TaskId_t</a> taskId)
<a name="l00146"></a>00146 {
<a name="l00147"></a>00147   SYS_taskMask &amp;= ~taskId;
<a name="l00148"></a>00148 }
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 <span class="comment">/***************************************************************************/</span>
<a name="l00155"></a><a class="code" href="sys_task_manager_8h.html#ad14f4bd70f8fb27211b05e47cd26d881">00155</a> INLINE <span class="keywordtype">void</span> <a class="code" href="sys_task_manager_8h.html#ad14f4bd70f8fb27211b05e47cd26d881" title="Enables specified task.">SYS_EnableTask</a>(<a class="code" href="sys_task_manager_8h.html#a32d97e8a721502f064d710c72ff37a49">SYS_TaskId_t</a> taskId)
<a name="l00156"></a>00156 {
<a name="l00157"></a>00157   SYS_taskMask |= taskId;
<a name="l00158"></a>00158 }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160 <span class="comment">/**************************************************************************************/</span>
<a name="l00168"></a>00168 <span class="keywordtype">bool</span> <a class="code" href="group__sys.html#ga445f4a39e0b3cb95bf80ed93867b0ebc" title="This function is called by the stack or from the main() function to process tasks.">SYS_RunTask</a>(<span class="keywordtype">void</span>);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="comment">//\cond internal</span>
<a name="l00171"></a>00171 <span class="comment">/**************************************************************************************/</span>
<a name="l00176"></a>00176 <span class="keywordtype">void</span> SYS_ForceRunTask(<span class="keywordtype">void</span>);
<a name="l00177"></a>00177 
<a name="l00178"></a>00178 <span class="comment">/**************************************************************************************/</span>
<a name="l00183"></a>00183 <span class="keywordtype">void</span> SYS_ForcePdsHandler(<span class="keywordtype">void</span>);
<a name="l00184"></a>00184 <span class="comment">// \endcond</span>
<a name="l00185"></a>00185 
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 <span class="comment">/***************************************************************************/</span>
<a name="l00190"></a>00190 <span class="keywordtype">void</span> <a class="code" href="sys_task_manager_8h.html#ad327ff72a0834512ccac0c70a22f9b95" title="Force PDS handler procedure.">SYS_ForceZsiHandler</a>(<span class="keywordtype">void</span>);
<a name="l00191"></a>00191 
<a name="l00192"></a>00192 <span class="comment">/**************************************************************************/</span>
<a name="l00203"></a>00203 <a class="code" href="sys_task_manager_8h.html#a04c22e4373d6f7efdad6415f2c9323cd" title="Possible results of system&#39;s initialization.">SYS_InitStatus_t</a> <a class="code" href="group__sys.html#ga754f4af3ac3b77f2e4b58e0ade073275" title="Initializes the microconroller and the radio chip.">SYS_SysInit</a>(<span class="keywordtype">void</span>);
<a name="l00204"></a>00204 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
