<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: Common functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Common functions</div>  </div>
<div class="ingroups"><a class="el" href="group__zcl.html">ZCL functions</a></div></div>
<div class="contents">

<p>ZCL functions related to all clusters: functions for sending general and cluster-specific commands, auxiliary APIs etc.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga05ee41ad7d70cd41d85f9c3d94615e73">ZCL_RegisterEndpoint</a> (<a class="el" href="struct_z_c_l___device_endpoint__t.html">ZCL_DeviceEndpoint_t</a> *endpoint)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Registers an application endpoint.  <a href="#ga05ee41ad7d70cd41d85f9c3d94615e73"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga8a12efca57936c482cb42cf5f28e81d6">ZCL_UnregisterEndpoint</a> (<a class="el" href="struct_z_c_l___device_endpoint__t.html">ZCL_DeviceEndpoint_t</a> *endpoint)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregisters an application endpoint.  <a href="#ga8a12efca57936c482cb42cf5f28e81d6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#gad8090823f0c8b2b8ef32e4338b521132">ZCL_ResetReq</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the ZCL component.  <a href="#gad8090823f0c8b2b8ef32e4338b521132"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga2c080314f17366701fa99abdb2666288">ZCL_ReadAttributeValue</a> (<a class="el" href="app_framework_8h.html#a2b4bc3df040a6181a3665c8e5ab24142">Endpoint_t</a> endpointId, <a class="el" href="app_framework_8h.html#a6de6a020fadabae5228d009b790063b3">ClusterId_t</a> clusterId, uint8_t clusterSide, <a class="el" href="zcl_8h.html#ab0ce42b1a9922bb6ad781207fa14667c">ZCL_AttributeId_t</a> attrId, uint8_t *attrType, uint8_t *attrValue)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an attribute in ZCL and returns its value.  <a href="#ga2c080314f17366701fa99abdb2666288"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga82f9b80ba55e1e284d988fe640eba97e">ZCL_WriteAttributeValue</a> (<a class="el" href="app_framework_8h.html#a2b4bc3df040a6181a3665c8e5ab24142">Endpoint_t</a> endpointId, <a class="el" href="app_framework_8h.html#a6de6a020fadabae5228d009b790063b3">ClusterId_t</a> clusterId, uint8_t clusterSide, <a class="el" href="zcl_8h.html#ab0ce42b1a9922bb6ad781207fa14667c">ZCL_AttributeId_t</a> attrId, uint8_t attrType, uint8_t *attrValue)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds an attribute in ZCL and rewrites its value by the new one.  <a href="#ga82f9b80ba55e1e284d988fe640eba97e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#gaac4a2f82380a936f9387d1816cb13fe3">ZCL_AttributeReq</a> (<a class="el" href="struct_z_c_l___request__t.html">ZCL_Request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a general ZCL command related to attributes to a remote device.  <a href="#gaac4a2f82380a936f9387d1816cb13fe3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga794886c006893a943aad827b1bc9ff07">ZCL_CommandReq</a> (<a class="el" href="struct_z_c_l___request__t.html">ZCL_Request_t</a> *req)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a cluster-specific command.  <a href="#ga794886c006893a943aad827b1bc9ff07"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga96147392339fa103bce8f7415c5215e1">ZCL_GetAttributeLength</a> (uint8_t typeId, const uint8_t *value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This function returns bytes amount of a type by the type's ID.  <a href="#ga96147392339fa103bce8f7415c5215e1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga6864a555529476ecba2a7c6ea04385d3">ZCL_PutNextElement</a> (<a class="el" href="struct_z_c_l___next_element__t.html">ZCL_NextElement_t</a> *element)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds an element to the outgoing command payload.  <a href="#ga6864a555529476ecba2a7c6ea04385d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__zcl__common.html#ga4caa8bc385797cf04f4fbf824b53e00c">ZCL_GetNextElement</a> (<a class="el" href="struct_z_c_l___next_element__t.html">ZCL_NextElement_t</a> *element)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets an element from the incoming command's payload.  <a href="#ga4caa8bc385797cf04f4fbf824b53e00c"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>ZCL functions related to all clusters: functions for sending general and cluster-specific commands, auxiliary APIs etc. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga05ee41ad7d70cd41d85f9c3d94615e73"></a><!-- doxytag: member="zcl.h::ZCL_RegisterEndpoint" ref="ga05ee41ad7d70cd41d85f9c3d94615e73" args="(ZCL_DeviceEndpoint_t *endpoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ZCL_RegisterEndpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_z_c_l___device_endpoint__t.html">ZCL_DeviceEndpoint_t</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Registers an application endpoint. </p>
<p>This function registers an application endpoint to make ZCL know which devices types are used by the application and which client and server clusters are supported.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">endpoint</td><td>- contains device descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga8a12efca57936c482cb42cf5f28e81d6"></a><!-- doxytag: member="zcl.h::ZCL_UnregisterEndpoint" ref="ga8a12efca57936c482cb42cf5f28e81d6" args="(ZCL_DeviceEndpoint_t *endpoint)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ZCL_UnregisterEndpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_z_c_l___device_endpoint__t.html">ZCL_DeviceEndpoint_t</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Unregisters an application endpoint. </p>
<p>This function unregisters an application endpoint.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">endpoint</td><td>- contains device descriptor </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gad8090823f0c8b2b8ef32e4338b521132"></a><!-- doxytag: member="zcl.h::ZCL_ResetReq" ref="gad8090823f0c8b2b8ef32e4338b521132" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ZCL_ResetReq </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resets the ZCL component. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga2c080314f17366701fa99abdb2666288"></a><!-- doxytag: member="zcl.h::ZCL_ReadAttributeValue" ref="ga2c080314f17366701fa99abdb2666288" args="(Endpoint_t endpointId, ClusterId_t clusterId, uint8_t clusterSide, ZCL_AttributeId_t attrId, uint8_t *attrType, uint8_t *attrValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a> ZCL_ReadAttributeValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="app_framework_8h.html#a2b4bc3df040a6181a3665c8e5ab24142">Endpoint_t</a>&#160;</td>
          <td class="paramname"><em>endpointId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="app_framework_8h.html#a6de6a020fadabae5228d009b790063b3">ClusterId_t</a>&#160;</td>
          <td class="paramname"><em>clusterId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clusterSide</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zcl_8h.html#ab0ce42b1a9922bb6ad781207fa14667c">ZCL_AttributeId_t</a>&#160;</td>
          <td class="paramname"><em>attrId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>attrType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>attrValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds an attribute in ZCL and returns its value. </p>
<p>The function may be used to obtain only local attributes. To access an attribute on a remote device, send a read attributes general cluster command via the <a class="el" href="group__zcl__common.html#gaac4a2f82380a936f9387d1816cb13fe3" title="Sends a general ZCL command related to attributes to a remote device.">ZCL_AttributeReq()</a> function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">endpointId</td><td>- endpoint on which cluster is registered </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clusterId</td><td>- cluster unique identifier </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clusterSide</td><td>- detects the cluster's side (client or server) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrId</td><td>- attribute unique identifier </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">attrType</td><td>- pointer to attribute type determined and returned </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">attrValue</td><td>- read out attribute value pointer</td></tr>
  </table>
  </dd>
</dl>
<p>Caller is responsible for providing big enough attrValue buffer.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The status of the operation: <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa1f525bf63960effa3a2b01b20e744e94" title="Operation was successful.">ZCL_SUCCESS_STATUS</a> (0x00) - attribute value has been obtained successfully <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daabd4303f44e13816028d31af808685f63">ZCL_UNSUPPORTED_ATTRIBUTE_STATUS</a> (0x86) - the specified attribute is not supported </dd></dl>

</div>
</div>
<a class="anchor" id="ga82f9b80ba55e1e284d988fe640eba97e"></a><!-- doxytag: member="zcl.h::ZCL_WriteAttributeValue" ref="ga82f9b80ba55e1e284d988fe640eba97e" args="(Endpoint_t endpointId, ClusterId_t clusterId, uint8_t clusterSide, ZCL_AttributeId_t attrId, uint8_t attrType, uint8_t *attrValue)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a> ZCL_WriteAttributeValue </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="app_framework_8h.html#a2b4bc3df040a6181a3665c8e5ab24142">Endpoint_t</a>&#160;</td>
          <td class="paramname"><em>endpointId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="app_framework_8h.html#a6de6a020fadabae5228d009b790063b3">ClusterId_t</a>&#160;</td>
          <td class="paramname"><em>clusterId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>clusterSide</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="zcl_8h.html#ab0ce42b1a9922bb6ad781207fa14667c">ZCL_AttributeId_t</a>&#160;</td>
          <td class="paramname"><em>attrId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>attrType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>attrValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finds an attribute in ZCL and rewrites its value by the new one. </p>
<p>The function may be used to set or rewrite only local attributes. Affects attribute reporting on change. To set a new value to an attribute on a remote device, send a write attributes general cluster command via the <a class="el" href="group__zcl__common.html#gaac4a2f82380a936f9387d1816cb13fe3" title="Sends a general ZCL command related to attributes to a remote device.">ZCL_AttributeReq()</a> function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">endpointId</td><td>- endpoint on which cluster is registered </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clusterId</td><td>- cluster unique identifier </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">clusterSide</td><td>- detects the cluster's side (client or server) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrId</td><td>- attribute unique identifier </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrType</td><td>- type of the attribute to be set </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attrValue</td><td>- pointer to attribute value to be set</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The status of the operation: <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa1f525bf63960effa3a2b01b20e744e94" title="Operation was successful.">ZCL_SUCCESS_STATUS</a> (0x00) - new value has been written successfully <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daabd4303f44e13816028d31af808685f63">ZCL_UNSUPPORTED_ATTRIBUTE_STATUS</a> (0x86) - the specified attribute is not supported <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa9e4fb0497d6e9e2d155a37e6c239fe20">ZCL_INVALID_PARAMETER_STATUS</a> (0xFF) - NULL has been provided as the attribute's value <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa0cbf39fac1078537cc1d6ae1a79aff7b">ZCL_INVALID_DATA_TYPE_STATUS</a> (0x8D) - the attribute's type is not the same as specified in the argument <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa5a8cd4141693d644120a4f483c4d7582">ZCL_READ_ONLY_STATUS</a> (0x88) - the attribute's value cannot be changed, because the attribute is read-only </dd></dl>

</div>
</div>
<a class="anchor" id="gaac4a2f82380a936f9387d1816cb13fe3"></a><!-- doxytag: member="zcl.h::ZCL_AttributeReq" ref="gaac4a2f82380a936f9387d1816cb13fe3" args="(ZCL_Request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ZCL_AttributeReq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_z_c_l___request__t.html">ZCL_Request_t</a> *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a general ZCL command related to attributes to a remote device. </p>
<p>The function is used to read/write attributes from a remote device, to report local attributes, and to discover attributes supported by a particular cluster on a remote device.</p>
<p>Command's parameters include addressing information, calback functions, command's ID, and the payload. The payload may be formed via the <a class="el" href="group__zcl__common.html#ga6864a555529476ecba2a7c6ea04385d3" title="Adds an element to the outgoing command payload.">ZCL_PutNextElement()</a> function and an instance of <a class="el" href="struct_z_c_l___next_element__t.html" title="Type describing information which is necessary for put/get element to/from payload.">ZCL_NextElement_t</a> type. The command may be used to perform actions on multiple attributes at a time; for example, to read several attributes from a remote device.</p>
<p>Attribute related commands are usually send to specific short or extended addresses. Sending such commands to bound devices (employing <a class="el" href="aps_common_8h.html#a0bc5b23d1c85adcef057f8c04dfc5365a0d86b2a778d6ff80a43cb246fe4732c2">APS_NO_ADDRESS</a> mode) may not be as efficient, because in case of responses from more than one device the ZCL component will process only the first one.</p>
<p>The callback function specified in the <code>req-&gt;ZCL_Notify</code> field is called twice for most of the commands (excluding reporting): the first time to confirm that the command has been sent, and the second time upon receiving the response command. To differentiate these the callback's argument includes the <a class="el" href="struct_z_c_l___notify__t.html#af1b8cc0c400b6f025054d9a705552ded" title="id of notification">ZCL_Notify_t::id</a> field, which equals <a class="el" href="zcl_8h.html#ac89b6a13c7c30ac531b80f180e4a8ca2a4a99cb31920b04c5d74b6bdbf17c8dd7" title="request was sent and transport acknowledgment was received">ZCL_APS_CONFIRM_ID</a> in the first case and <a class="el" href="zcl_8h.html#ac89b6a13c7c30ac531b80f180e4a8ca2a50b382c00b50d523a8f4a93ce4630e31" title="zcl response was received">ZCL_ZCL_RESPONSE_ID</a> in the second.</p>
<p>Common uses of the function include sending the following commands (the command's ID listed below should be assigned to the <code>req-&gt;id</code> field): </p>
<ul>
<li><a class="el" href="zcl_8h.html#a0c0e8d0781bc737e4fd8e0c492cd8da2ab9a170c5cbb08cdcc066ccb02e9523dc">ZCL_READ_ATTRIBUTES_COMMAND_ID</a> - reading remote attributes (obtaining values) </li>
<li><a class="el" href="zcl_8h.html#a0c0e8d0781bc737e4fd8e0c492cd8da2a1a7a991571db98e82f26037120922587">ZCL_WRITE_ATTRIBUTES_COMMAND_ID</a> - writing remote attributes (assigning new values) </li>
<li><a class="el" href="zcl_8h.html#a0c0e8d0781bc737e4fd8e0c492cd8da2ab9f8dca2e909dd82452a813bb2183fd7">ZCL_REPORT_ATTRIBUTES_COMMAND_ID</a> - reporting local attributes to remote devices (sending current attributes' values) </li>
<li><a class="el" href="zcl_8h.html#a0c0e8d0781bc737e4fd8e0c492cd8da2a31165fbec9afee6c512e6d9454214d89">ZCL_DISCOVER_ATTRIBUTES_COMMAND_ID</a> - discovering attributes of a remote device (obtaining data types and IDs of attributes supported by a particular cluster) </li>
<li>::ZCL_DISCOVER_COMMANDS_RECEIVED_COMMAND_ID - discovering the commands received (obtaining the list of commands those can be received and processed </li>
<li>::ZCL_DISCOVER_COMMANDS_GENEARATED_COMMAND_ID - discovering the commands generated (obtaining the list of commands those can be generated and processed </li>
<li>::ZCL_DISCOVER_ATTRIBUTES_EXTENDED_COMMAND_ID - discovering attributes of a remote device (obtaining data types,access control and IDs of attributes supported by a particular cluster) <dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">req</td><td>- command parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Response statuses:</b></dt><dd>Accessed via the <a class="el" href="struct_z_c_l___notify__t.html#a482fe5af7bc2c825c789bb5781b2ade5" title="status of command">ZCL_Notify_t::status</a> field of the callback function specified in the <code>req-&gt;ZCL_Notify</code> field <br/>
<br/>
 <em>All commands</em> <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa1f525bf63960effa3a2b01b20e744e94" title="Operation was successful.">ZCL_SUCCESS_STATUS</a> (0x00) - the request has been executed successfully (all attributes are written, read, or reported, etc.) <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daaed6fbb4599585d634edd98e4302f4381">ZCL_INSUFFICIENT_SPACE_STATUS</a> (0x89) - the ZCL buffer is not big enough to hold the request's payload <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daabd4303f44e13816028d31af808685f63">ZCL_UNSUPPORTED_ATTRIBUTE_STATUS</a> (0x86) - an attribute specified in the request is not supported by the destination node <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daad393668f05c3e9d220ba28f0fe13774d">ZCL_INVALID_FIELD_STATUS</a> (0x85) - a command's field contains an incorrect value <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa0cbf39fac1078537cc1d6ae1a79aff7b">ZCL_INVALID_DATA_TYPE_STATUS</a> (0x8D) - wrong attribute type has been specified <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa56aeced3a133c1f693892ff5c7d0b1f6">ZCL_TIMEOUT_STATUS</a> (0x94) - the response command is expected, but has not been received in time: the timeout based on network parameters (such as max network depth) has occured.<br/>
<br/>
 <em>Write attributes command</em> <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daaee111aadaa7bdbe069dea23544bb7876">ZCL_WRITE_ATTRIBUTES_FAILURE_STATUS</a> (0x0F) - not all attributes have been written; see individual statuses of attribute records to check each attribute <br/>
<br/>
 <em>Report attributes command</em> <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daaa84c31c92f98a5a1581dd1790a092d60">ZCL_UNREPORTABLE_ATTRIBUTE_STATUS</a> (0x8C) - the requested attribute is not reportable <br/>
<br/>
 </dd></dl>
</li>
</ul>

</div>
</div>
<a class="anchor" id="ga794886c006893a943aad827b1bc9ff07"></a><!-- doxytag: member="zcl.h::ZCL_CommandReq" ref="ga794886c006893a943aad827b1bc9ff07" args="(ZCL_Request_t *req)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ZCL_CommandReq </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_z_c_l___request__t.html">ZCL_Request_t</a> *&#160;</td>
          <td class="paramname"><em>req</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sends a cluster-specific command. </p>
<p>The function sends a general cluster specific command. The command's type is recognized according to the <code>req-&gt;id</code> field. Commands' IDs are defined in clusters' definition files, which also contain all definition related to a particular cluster.</p>
<p>In addition to addressing information and command's ID, eesential fields of the request parameters include the payload and the payload length. The payload for each command is defined as a structure in the cluster's definition file. The pointer to a properly configured instance of the command's payload shall be \ assigned to the <code>req-&gt;requestPayload</code> field.</p>
<p>The callback function specified in the <code>req-&gt;ZCL_Notify</code> field is called to indicate the status of the command's delivery (not a specific response for the command). If acknowledgment of the command's delivery is received the success status is reported in the callback.</p>
<p>A specific response to the command is processed by a special indication function registered for the command. If a command does not imply a specific response the default response may be requested (to indicate that the command has been executed). To request the default response set the <code>req-&gt;defaultResponse</code> field to <a class="el" href="clusters_8h.html#a551a6de2144a92294e13c0b1915c150e">ZCL_FRAME_CONTROL_ENABLE_DEFAULT_RESPONSE</a>. To disable default response set <code>req-&gt;defaultResponse</code> to <a class="el" href="clusters_8h.html#a7788b7a7d5e065b1ab5d18bcd55500d6">ZCL_FRAME_CONTROL_DISABLE_DEFAULT_RESPONSE</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">req</td><td>- contains request descriptor</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Response statuses:</b></dt><dd>The <a class="el" href="struct_z_c_l___notify__t.html#a482fe5af7bc2c825c789bb5781b2ade5" title="status of command">ZCL_Notify_t::status</a> field of the callback function specified in the <code>req-&gt;ZCL_Notify</code> field reports the status of command's transmission and acknowledgement <br/>
<br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa1f525bf63960effa3a2b01b20e744e94" title="Operation was successful.">ZCL_SUCCESS_STATUS</a> (0x00) - the command has been sent successfully and the acknowledgement has been received <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daaed6fbb4599585d634edd98e4302f4381">ZCL_INSUFFICIENT_SPACE_STATUS</a> (0x89) - the ZCL buffer is not big enough to hold the request's payload <br/>
 Error codes - all status codes returned by the <a class="el" href="group__aps__data.html#ga2a584bc786c377e3e69b0896b0d0a55f" title="Sends data to a node in the network.">APS_DataReq()</a> function. </dd></dl>

</div>
</div>
<a class="anchor" id="ga96147392339fa103bce8f7415c5215e1"></a><!-- doxytag: member="zcl.h::ZCL_GetAttributeLength" ref="ga96147392339fa103bce8f7415c5215e1" args="(uint8_t typeId, const uint8_t *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t ZCL_GetAttributeLength </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>typeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This function returns bytes amount of a type by the type's ID. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">typeId</td><td>- type's ID </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>- pointer to variable of typeId, NULL means the maximum possible size </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga6864a555529476ecba2a7c6ea04385d3"></a><!-- doxytag: member="zcl.h::ZCL_PutNextElement" ref="ga6864a555529476ecba2a7c6ea04385d3" args="(ZCL_NextElement_t *element)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a> ZCL_PutNextElement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_z_c_l___next_element__t.html">ZCL_NextElement_t</a> *&#160;</td>
          <td class="paramname"><em>element</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Adds an element to the outgoing command payload. </p>
<p>This function is used to simplify forming a correst payload for general commands (read/write attributes etc.). A single command may involve actions on several attributes, and so the overall payload should contain pieces corresponding to each attribute.</p>
<p>The general idea is to provide a buffer for the payload and some content. The function writes the content in a correct way to the buffer and calculate the overall payload length. The buffer and the payload length are then passed as parameters to the <a class="el" href="group__zcl__common.html#gaac4a2f82380a936f9387d1816cb13fe3" title="Sends a general ZCL command related to attributes to a remote device.">ZCL_AttributeReq()</a> function.</p>
<p>See the following example:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="struct_z_c_l___next_element__t.html" title="Type describing information which is necessary for put/get element to/from payload.">ZCL_NextElement_t</a> element;
<a class="code" href="struct_z_c_l___read_attribute_req__t.html" title="Type describing payload element of read request command.">ZCL_ReadAttributeReq_t</a> readAttrReqElement;
<a class="code" href="struct_z_c_l___request__t.html">ZCL_Request_t</a> readAttrReq;
uint8_t buffer[BUFFER_SIZE];

element.<a class="code" href="struct_z_c_l___next_element__t.html#a16a0be33750a20362b955a7f336ca9c7" title="Payload&#39;s length after adding of a new element.">payloadLength</a> = 0;
element.<a class="code" href="struct_z_c_l___next_element__t.html#aa2efd5fc84be741be40a9acc6245c4b9" title="Payload&#39;s pointer to the place where an element is added.">payload</a> = buffer;
element.<a class="code" href="struct_z_c_l___next_element__t.html#a375121dfe4eacf81cd11fdb3557c026a" title="Element&#39;s ID. Can be either ZCL_GeneralCommandId_t value or a special cluster command ID...">id</a> = <a class="code" href="zcl_8h.html#a0c0e8d0781bc737e4fd8e0c492cd8da2ab9a170c5cbb08cdcc066ccb02e9523dc">ZCL_READ_ATTRIBUTES_COMMAND_ID</a>;
element.<a class="code" href="struct_z_c_l___next_element__t.html#addc7d223b974355e573c57f585a9a941" title="Pointer to content (memory) which shall be added/filled to/from the payload.">content</a> = &amp;readAttrReqElement;

readAttrReqElement = ATTRIBUTE_ID1; <span class="comment">//Set to the ID of the first attribute</span>
<a class="code" href="group__zcl__common.html#ga6864a555529476ecba2a7c6ea04385d3" title="Adds an element to the outgoing command payload.">ZCL_PutNextElement</a>(&amp;element);

readAttrReqElement = ATTRIBUTE_ID2; <span class="comment">//Set to the ID of the second attribute</span>
<a class="code" href="group__zcl__common.html#ga6864a555529476ecba2a7c6ea04385d3" title="Adds an element to the outgoing command payload.">ZCL_PutNextElement</a>(&amp;element);

readAttrReq.<a class="code" href="struct_z_c_l___request__t.html#a61f883b2a98391a5af007673b0a3b79d" title="Request&#39;s payload length.">requestLength</a> = element.<a class="code" href="struct_z_c_l___next_element__t.html#a16a0be33750a20362b955a7f336ca9c7" title="Payload&#39;s length after adding of a new element.">payloadLength</a>;
readAttrReq.<a class="code" href="struct_z_c_l___request__t.html#a6fd4659efc82e6d4dbdded7b1b37b3ac" title="Request payload. Can be filled by the ZCL_PutNextElement() function.">requestPayload</a> = buffer;
...
</pre></div><p>Note, however, that the usage may differ depending on a command's type.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">element</td><td>- information about payload and element </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>of the operation: <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa1f525bf63960effa3a2b01b20e744e94" title="Operation was successful.">ZCL_SUCCESS_STATUS</a> (0x00) - an element has been written to the payload successfully, more elements can be added <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa467a54f74c68cccd0a0ae386352146bc">ZCL_END_PAYLOAD_REACHED_STATUS</a> (0xFD) - an element has been written successfully, and the payload is full - no more elements can be added <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa9e4fb0497d6e9e2d155a37e6c239fe20">ZCL_INVALID_PARAMETER_STATUS</a> (0xFF) - the argument is NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4caa8bc385797cf04f4fbf824b53e00c"></a><!-- doxytag: member="zcl.h::ZCL_GetNextElement" ref="ga4caa8bc385797cf04f4fbf824b53e00c" args="(ZCL_NextElement_t *element)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da">ZCL_Status_t</a> ZCL_GetNextElement </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_z_c_l___next_element__t.html">ZCL_NextElement_t</a> *&#160;</td>
          <td class="paramname"><em>element</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets an element from the incoming command's payload. </p>
<p>The function is used to simplify processing of responses fo general attributes related commands. Such command may return information concerning several attributes in a single frame. This function reads the next portion of information from the response payload.</p>
<p>To use the function configure an instance of ZCL_NextElement type. The <code>element-&gt;payload</code> field should be set to the response payload, the <code>element-&gt;payloadLength</code> to the reponse payload's length, and the <code>element-&gt;id</code> field to the ID of the response. After calling this function, the <code>element-&gt;content</code> field may be casted to the appropriate response type (depending on the command's type); for example, for read attributes response it is <a class="el" href="struct_z_c_l___read_attribute_resp__t.html" title="Type describing payload element of response to read request command.">ZCL_ReadAttributeResp_t</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">element</td><td>- information about payload and element </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>of the operation: <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa1f525bf63960effa3a2b01b20e744e94" title="Operation was successful.">ZCL_SUCCESS_STATUS</a> - an element has been read successfully, more elements are contained in the payload <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa467a54f74c68cccd0a0ae386352146bc">ZCL_END_PAYLOAD_REACHED_STATUS</a> (0xFD) - an element has been read successfully and no more elements are left in the payload <br/>
 <a class="el" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0daa9e4fb0497d6e9e2d155a37e6c239fe20">ZCL_INVALID_PARAMETER_STATUS</a> (0xFF) - the argument is NULL </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
