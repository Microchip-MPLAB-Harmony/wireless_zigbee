<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PIC32CX-BZ Zigbee API Reference: zclParser.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PIC32CX-BZ Zigbee API Reference</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">zclParser.h</div>  </div>
</div>
<div class="contents">
<a href="zcl_parser_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/************************************************************************/</span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifndef _ZCLPARSER_H</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span><span class="preprocessor">#define _ZCLPARSER_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span>
<a name="l00024"></a>00024 <span class="comment">/******************************************************************************</span>
<a name="l00025"></a>00025 <span class="comment">                   Includes section</span>
<a name="l00026"></a>00026 <span class="comment">******************************************************************************/</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &lt;<a class="code" href="sys_types_8h.html" title="The header file describes global system types and pre-processor words which depends on compiler or pl...">sysTypes.h</a>&gt;</span>
<a name="l00028"></a>00028 <span class="comment">//#include &lt;zclDbg.h&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;<a class="code" href="zcl_8h.html" title="The header file describes the public ZCL interface.">zcl.h</a>&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;<a class="code" href="zcl_memory_manager_8h.html" title="The header file describes the ZCL Memory Manager interface.">zclMemoryManager.h</a>&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;<a class="code" href="sys_queue_8h.html">sysQueue.h</a>&gt;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="comment">/******************************************************************************</span>
<a name="l00034"></a>00034 <span class="comment">                   Define(s) section</span>
<a name="l00035"></a>00035 <span class="comment">******************************************************************************/</span>
<a name="l00036"></a>00036 <span class="comment">/*ZCL Header Frame Type sub-field value*/</span>
<a name="l00037"></a>00037 <span class="preprocessor">#define ZCL_FRAME_CONTROL_FRAME_TYPE_UNIVERSAL_COMMAND            0x00</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_FRAME_CONTROL_FRAME_TYPE_SPECIFIC_COMMAND             0x01</span>
<a name="l00039"></a>00039 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="comment">/*ZCL Header Manufacturer Specific sub-field value*/</span>
<a name="l00041"></a>00041 <span class="preprocessor">#define ZCL_FRAME_CONTROL_MANUFACTURER_NONSPECIFIC                0x00</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_FRAME_CONTROL_MANUFACTURER_SPECIFIC                   0x01</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span>
<a name="l00044"></a>00044 <span class="preprocessor">#define ZCL_FRAME_SIMPLE_HEADER_LENGTH                            3</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_FRAME_HEADER_MANUFACTURER_CODE_LENGTH                 2</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_FRAME_HEADER_WITH_MANUFACTURER_CODE_LENGTH            \</span>
<a name="l00047"></a>00047 <span class="preprocessor">        (ZCL_FRAME_SIMPLE_HEADER_LENGTH + ZCL_FRAME_HEADER_MANUFACTURER_CODE_LENGTH)</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 <span class="preprocessor">#define ZCL_STANDARD_REQ_TYPE                                     ZCL_FRAME_CONTROL_FRAME_TYPE_UNIVERSAL_COMMAND</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_SPECIAL_REQ_TYPE                                      ZCL_FRAME_CONTROL_FRAME_TYPE_SPECIFIC_COMMAND</span>
<a name="l00051"></a>00051 <span class="preprocessor"></span>
<a name="l00052"></a>00052 <span class="preprocessor">#ifndef ZCL_MAX_STANDARD_DATA_TYPE_SIZE</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_MAX_STANDARD_DATA_TYPE_SIZE                           8</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00056"></a>00056 <span class="preprocessor">#define ZCL_DATA_TYPE_DISCRETE_KIND                               0x00</span>
<a name="l00057"></a>00057 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_DATA_TYPE_ANALOG_KIND                                 0x01</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span><span class="preprocessor">#define ZCL_DATA_TYPE_STRUCTURED_KIND                             0x02</span>
<a name="l00059"></a>00059 <span class="preprocessor"></span>
<a name="l00060"></a>00060 <span class="comment">/******************************************************************************</span>
<a name="l00061"></a>00061 <span class="comment">                   Types section</span>
<a name="l00062"></a>00062 <span class="comment">******************************************************************************/</span>
<a name="l00063"></a>00063 BEGIN_PACK
<a name="l00064"></a><a class="code" href="struct_zcl_frame_control_field__t.html">00064</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00065"></a>00065 {
<a name="l00066"></a>00066   <span class="keyword">union </span>PACK
<a name="l00067"></a>00067   {
<a name="l00068"></a>00068     <span class="keyword">struct </span>PACK
<a name="l00069"></a>00069     {
<a name="l00070"></a>00070       LITTLE_ENDIAN_OCTET(5,(
<a name="l00071"></a>00071         uint8_t frameType             :2, <span class="comment">//Frame type sub-field</span>
<a name="l00072"></a>00072         uint8_t manufacturerSpecific  :1, <span class="comment">//Manufacturer specific sub-field</span>
<a name="l00073"></a>00073         uint8_t direction             :1, <span class="comment">//Direction sub-field</span>
<a name="l00074"></a>00074         uint8_t defaultResponse       :1, <span class="comment">//Disable default response sub-field</span>
<a name="l00075"></a>00075         uint8_t reserved              :3  <span class="comment">//Reserved bits. Must have a zero value</span>
<a name="l00076"></a>00076       ))
<a name="l00077"></a>00077     };
<a name="l00078"></a>00078     uint8_t uint8;
<a name="l00079"></a>00079   };
<a name="l00080"></a>00080 } <a class="code" href="struct_zcl_frame_control_field__t.html">ZclFrameControlField_t</a>;
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="struct_zcl_frame_header__t.html">00082</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00083"></a>00083 {
<a name="l00084"></a>00084   <a class="code" href="struct_zcl_frame_control_field__t.html">ZclFrameControlField_t</a>  frameControl;
<a name="l00085"></a>00085   uint16_t                manufacturerCode;
<a name="l00086"></a>00086   uint8_t                 sequenceNumber;
<a name="l00087"></a>00087   uint8_t                 commandId;
<a name="l00088"></a>00088 } <a class="code" href="struct_zcl_frame_header__t.html">ZclFrameHeader_t</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090 <span class="comment">/******************************************************************************</span>
<a name="l00091"></a>00091 <span class="comment"> Read Attributes commands</span>
<a name="l00092"></a>00092 <span class="comment">******************************************************************************/</span>
<a name="l00094"></a><a class="code" href="struct_zcl_read_attributes_record__t.html">00094</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00095"></a>00095 {
<a name="l00096"></a>00096   uint16_t attributeId;
<a name="l00097"></a>00097 } <a class="code" href="struct_zcl_read_attributes_record__t.html" title="ZCL read attributes command record.">ZclReadAttributesRecord_t</a>;
<a name="l00098"></a>00098 
<a name="l00100"></a><a class="code" href="struct_zcl_read_attributes_command__t.html">00100</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00101"></a>00101 {
<a name="l00102"></a>00102   <a class="code" href="struct_zcl_read_attributes_record__t.html" title="ZCL read attributes command record.">ZclReadAttributesRecord_t</a> records[1];
<a name="l00103"></a>00103 } <a class="code" href="struct_zcl_read_attributes_command__t.html" title="ZCL Read attributes command payload.">ZclReadAttributesCommand_t</a>;
<a name="l00104"></a>00104 
<a name="l00105"></a><a class="code" href="struct_zcl_read_attributes_response_array_set_bag_value__t.html">00105</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00106"></a>00106 {
<a name="l00107"></a>00107   uint8_t   elementType;
<a name="l00108"></a>00108   uint16_t  elementsAmount;
<a name="l00109"></a>00109   <span class="keyword">struct </span>PACK
<a name="l00110"></a>00110   {
<a name="l00111"></a>00111     uint8_t   value[1];
<a name="l00112"></a>00112   } elements[1];
<a name="l00113"></a>00113 } <a class="code" href="struct_zcl_read_attributes_response_array_set_bag_value__t.html">ZclReadAttributesResponseArraySetBagValue_t</a>;
<a name="l00114"></a>00114 
<a name="l00115"></a><a class="code" href="struct_zcl_read_attributes_response_struct_value__t.html">00115</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117   uint16_t  elementsAmount;
<a name="l00118"></a>00118   <span class="keyword">struct </span>PACK
<a name="l00119"></a>00119   {
<a name="l00120"></a>00120     uint8_t   elementType;
<a name="l00121"></a>00121     uint8_t   value[1];
<a name="l00122"></a>00122   } elements [1];
<a name="l00123"></a>00123 } <a class="code" href="struct_zcl_read_attributes_response_struct_value__t.html">ZclReadAttributesResponseStructValue_t</a>;
<a name="l00124"></a>00124 
<a name="l00126"></a><a class="code" href="struct_zcl_read_attributes_response_record__t.html">00126</a> <span class="keyword">typedef</span> <span class="keyword">struct </span>PACK
<a name="l00127"></a>00127 {
<a name="l00128"></a>00128   <a class="code" href="zcl_8h.html#ab0ce42b1a9922bb6ad781207fa14667c" title="The type for holding attribute IDs.">ZCL_AttributeId_t</a> attributeId;
<a name="l00129"></a>00129   uint8_t           status;
<a name="l00130"></a>00130   uint8_t           type;
<a name="l00131"></a>00131   <span class="keyword">union </span>PACK
<a name="l00132"></a>00132   {
<a name="l00133"></a>00133     uint8_t         simpleValue[1];
<a name="l00134"></a>00134     <a class="code" href="struct_zcl_read_attributes_response_array_set_bag_value__t.html">ZclReadAttributesResponseArraySetBagValue_t</a> arraySetBagValue;
<a name="l00135"></a>00135     <a class="code" href="struct_zcl_read_attributes_response_struct_value__t.html">ZclReadAttributesResponseStructValue_t</a>      structValue;
<a name="l00136"></a>00136   };
<a name="l00137"></a>00137 } <a class="code" href="struct_zcl_read_attributes_response_record__t.html" title="ZCL read attributes response command record.">ZclReadAttributesResponseRecord_t</a>;
<a name="l00138"></a>00138 
<a name="l00139"></a>00139 END_PACK
<a name="l00140"></a>00140 
<a name="l00141"></a><a class="code" href="struct_zcl_frame_descriptor__t.html">00141</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00142"></a>00142 {
<a name="l00143"></a>00143   uint8_t   headerLength;
<a name="l00144"></a>00144   uint8_t   payloadLength;
<a name="l00145"></a>00145   uint8_t   frameType;
<a name="l00146"></a>00146   uint8_t   direction;
<a name="l00147"></a>00147   uint8_t   defaultResponse;
<a name="l00148"></a>00148   uint8_t   manufacturerSpecific;
<a name="l00149"></a>00149   uint16_t  manufacturerCode;
<a name="l00150"></a>00150   uint8_t   sequenceNumber;
<a name="l00151"></a>00151   uint8_t   commandId;
<a name="l00152"></a>00152   uint8_t   *header;
<a name="l00153"></a>00153   uint8_t   *payload;
<a name="l00154"></a>00154 } <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a>;
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="struct_zcl_aux_parse_data__t.html">00156</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00157"></a>00157 {
<a name="l00158"></a>00158   <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a> *frameDescriptor;
<a name="l00159"></a>00159   <a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a>        *ind;
<a name="l00160"></a>00160   <a class="code" href="zcl_8h.html#ad5ed4e48a062501fc4f9a9378cffe0da" title="Enumerated status values used in ZCL.">ZCL_Status_t</a>          commandStatus;
<a name="l00161"></a>00161   <span class="keywordtype">bool</span>                  apsSecurity;
<a name="l00162"></a>00162   <span class="keywordtype">bool</span>                  relevantResponse;
<a name="l00163"></a>00163 } <a class="code" href="struct_zcl_aux_parse_data__t.html">ZclAuxParseData_t</a>;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165 <span class="comment">/*************************************************************************/</span>
<a name="l00168"></a>00168 <span class="keywordtype">void</span> <a class="code" href="zcl_parser_8h.html#a13a63b55c393d9251ade808c7711ccf1" title="Reset parser queue and clear memory.">zclParserInit</a>(<span class="keywordtype">void</span>);
<a name="l00169"></a>00169 
<a name="l00170"></a>00170 <span class="comment">/**************************************************************************/</span>
<a name="l00182"></a>00182 uint8_t <a class="code" href="zcl_parser_8h.html#a896180a160ca8d1619c993c39d24e2a8" title="Form zcl header.">zclFormRequest</a>(<a class="code" href="struct_a_p_s___data_req__t.html" title="The structure for request parameters of APS_DataReq() function.">APS_DataReq_t</a> *dataReq,
<a name="l00183"></a>00183                        uint8_t reqType,
<a name="l00184"></a>00184                        uint8_t direction,
<a name="l00185"></a>00185                        uint8_t commandId,
<a name="l00186"></a>00186                        uint8_t defaultResponse,
<a name="l00187"></a>00187                        uint16_t manufacSpecCode,
<a name="l00188"></a>00188                        uint8_t sequenceNumber);
<a name="l00189"></a>00189 
<a name="l00190"></a>00190 <span class="comment">/*************************************************************************/</span>
<a name="l00197"></a>00197 <span class="keywordtype">void</span> <a class="code" href="zcl_parser_8h.html#a49bbf33af6c68bfe394833b5f9bdc176" title="Response has been received.">zclResponseInd</a>(<a class="code" href="struct_zcl_aux_parse_data__t.html">ZclAuxParseData_t</a> *auxData, <a class="code" href="struct_z_c_l___request__t.html">ZCL_Request_t</a> *req);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199 <span class="preprocessor">#ifdef _ZCL_REPORTING_SUPPORT_</span>
<a name="l00200"></a>00200 <span class="preprocessor"></span><span class="comment">/*************************************************************************/</span>
<a name="l00208"></a>00208 <span class="keywordtype">bool</span> zclReadReportingConfigurationHandler(<a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a> *apsDataInd, <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a> *frameDescriptor);
<a name="l00209"></a>00209 
<a name="l00210"></a>00210 <span class="comment">/*************************************************************************/</span>
<a name="l00218"></a>00218 <span class="keywordtype">bool</span> zclConfigureReportingHandler(<a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a> *apsDataInd, <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a> *frameDescriptor);
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="comment">/*************************************************************************/</span>
<a name="l00226"></a>00226 <span class="keywordtype">void</span> zclReportInd(<a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a> *apsData, <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a> *frameDesc);
<a name="l00227"></a>00227 <span class="preprocessor">#endif // _ZCL_REPORTING_SUPPORT_</span>
<a name="l00228"></a>00228 <span class="preprocessor"></span>
<a name="l00229"></a>00229 <span class="comment">/*************************************************************************/</span>
<a name="l00235"></a>00235 <span class="keywordtype">void</span> <a class="code" href="zcl_parser_8h.html#a171228d281a117f175d3df477ce2ea16" title="Special cluster command has been received.">zclCommandInd</a>(<a class="code" href="struct_zcl_aux_parse_data__t.html">ZclAuxParseData_t</a> *auxData);
<a name="l00236"></a>00236 
<a name="l00237"></a>00237 <span class="comment">/*************************************************************************/</span>
<a name="l00245"></a>00245 <span class="keywordtype">void</span> <a class="code" href="zcl_parser_8h.html#adeaba5fb535f3eae27cff65c86786f02" title="The attribute has been read or written.">zclAttributeEventInd</a>(<span class="keyword">const</span> <a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a> *apsDataInd,
<a name="l00246"></a>00246                           <span class="keyword">const</span> <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a> *incomingFrameInfo,
<a name="l00247"></a>00247                           <a class="code" href="zcl_8h.html#a75379e1eaccdb99df44144a411c96210" title="Type describing ZCL&#39;s events on cluster&#39;s attribute.">ZCL_AttributeEvent_t</a> event,
<a name="l00248"></a>00248                           <a class="code" href="zcl_8h.html#ab0ce42b1a9922bb6ad781207fa14667c" title="The type for holding attribute IDs.">ZCL_AttributeId_t</a> attributeId);
<a name="l00249"></a>00249 
<a name="l00250"></a>00250 <span class="comment">/*************************************************************************/</span>
<a name="l00256"></a>00256 <span class="keywordtype">void</span> <a class="code" href="zcl_parser_8h.html#ab47ad40c56afa2e641664fb85e0d21c8" title="Configuration has been received.">zclConfigurationInd</a>(<a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a> *apsData, <a class="code" href="struct_zcl_frame_descriptor__t.html">ZclFrameDescriptor_t</a> *frameDesc);
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">/*************************************************************************/</span>
<a name="l00263"></a>00263 <span class="keywordtype">void</span> <a class="code" href="zcl_parser_8h.html#a7bc1f14184cb8bf168ae80d035745abe" title="Indication from CAPS.">zclDataInd</a>(<a class="code" href="struct_a_p_s___data_ind__t.html" title="The structure for indication of data reception.">APS_DataInd_t</a> *ind);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265 <span class="comment">/*************************************************************************/</span>
<a name="l00279"></a>00279 uint8_t <a class="code" href="zcl_parser_8h.html#a58b61d09f63b1947054753ee7c3c34d3" title="Security Type get by Cluster Id function and by endpointId, on which was registered cluster...">zclGetSecurityTypeByClusterId</a>(<a class="code" href="app_framework_8h.html#a6de6a020fadabae5228d009b790063b3" title="The type for holding cluster ID.">ClusterId_t</a> clusterId, <a class="code" href="app_framework_8h.html#a2b4bc3df040a6181a3665c8e5ab24142" title="The type for holding endpoint ID.">Endpoint_t</a> endpointId, <span class="keywordtype">bool</span> mspSupport);
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="comment">/**************************************************************************/</span>
<a name="l00292"></a>00292 <a class="code" href="struct_z_c_l___device_endpoint__t.html" title="Type describing parameter of ZCL_RegisterEndpoint() function.">ZCL_DeviceEndpoint_t</a>* <a class="code" href="zcl_parser_8h.html#ab99142782d8e673be33ea8d16d9744b4" title="Get next registered ZCL endpoint descriptor by previous.">zclNextEndpoint</a>(<a class="code" href="struct_z_c_l___device_endpoint__t.html" title="Type describing parameter of ZCL_RegisterEndpoint() function.">ZCL_DeviceEndpoint_t</a> *prev);
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="comment">/*************************************************************************/</span>
<a name="l00300"></a>00300 <a class="code" href="struct_z_c_l___device_endpoint__t.html" title="Type describing parameter of ZCL_RegisterEndpoint() function.">ZCL_DeviceEndpoint_t</a> *<a class="code" href="zcl_parser_8h.html#ac1b17e8ed9854858b109bed682f76f11" title="Find endpoint descriptor by endpoint id.">zclGetEndpoint</a>(<a class="code" href="app_framework_8h.html#a2b4bc3df040a6181a3665c8e5ab24142" title="The type for holding endpoint ID.">Endpoint_t</a> endpointId);
<a name="l00301"></a>00301 <span class="preprocessor">#endif  //#ifndef _ZCLPARSER_H</span>
<a name="l00302"></a>00302 <span class="preprocessor"></span>
<a name="l00303"></a>00303 <span class="comment">//eof zclParser.h</span>
</pre></div></div>
</div>
<hr style="border-top:1px solid #C4CFE5; margin-top:20px"/>
</body>
</html>
