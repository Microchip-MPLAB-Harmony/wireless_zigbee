<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2023" />
<meta name="DC.rights.owner" content="(C) Copyright 2023" />
<meta name="generator" content="DITA-OT" /><meta name="DC.type" content="topic" />
<meta name="DC.title" content="Using parameters influencing network start" />
<meta name="DC.relation" scheme="URI" content="GUID-C306947F-F175-4699-B119-75961F5CDE21.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="GUID-70B9455F-A11E-46B9-B53A-7450BC565C6E" />
<meta name="DC.language" content="en-US" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Using parameters influencing network start</title>
<meta name="Microsoft.Help.Id" content="GUID-1DD68C79-8AC2-497D-A1BB-49D92D3FDAB8-GUID-70B9455F-A11E-46B9-B53A-7450BC565C6E" />
<meta name="Microsoft.Help.TocParent" content="GUID-1DD68C79-8AC2-497D-A1BB-49D92D3FDAB8-GUID-C306947F-F175-4699-B119-75961F5CDE21" />
<meta name="Microsoft.Help.TocOrder" content="1" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB Harmony Wireless Zigbee Reference 3 08/2023" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-70B9455F-A11E-46B9-B53A-7450BC565C6E"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="GUID-70B9455F-A11E-46B9-B53A-7450BC565C6E">
<h1 class="title topictitle1" id="GUID-70B9455F-A11E-46B9-B53A-7450BC565C6E__GUID-29376091-AE19-46F6-A20E-A6EC8D063CEA" style="">Using parameters influencing network start </h1><div class="body"><p class="p">Certain CS parameters are used to achieve an appropriate form of network start. This helps choose a proper network by predefining the network PANID or set either static or stochastic addressing scheme, etc.</p>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-C306947F-F175-4699-B119-75961F5CDE21.html">ConfigServer Component Usage</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="TOPIC_SP1_TST_J5B__GUID-7FF71206-F560-4F62-99FF-29370BF1B81E" id="TOPIC_SP1_TST_J5B"><h2 class="title topictitle2" id="TOPIC_SP1_TST_J5B__GUID-7FF71206-F560-4F62-99FF-29370BF1B81E" style="">Choosing device type</h2><div class="body"><p class="p">In addition to the CS_DEVICE_TYPE parameter which specifies the type of a device according to Zigbee specification, another parameter, called CS_RX_ON_WHEN_IDLE should be taken into consideration to determine the device type. CS_RX_ON_WHEN_IDLE indicates whether the radio is turned on permanently. Therefore on routers and the coordinator its value must always be <code class="ph codeph">true</code>. If parameter's value is <code class="ph codeph">false</code> which must happen on end devices only, the radio is turned on to transmit data only and to wait for response from a parent for a certain short period of time. Besides, being set to false the parameter enables polling mechanism allowing sleeping end devices to receive deferred messages stored by its parent while the end device slept. For that reason, on sleeping end devices CS_RX_ON_WHEN_IDLE shall be set to <code class="ph codeph">false</code>.</p>
<p class="p">For example, suppose that the device type is to be specified at run-time, then a typical way to configure a sleeping end device is as follows:</p>
<pre class="pre">//Prepare variablesDeviceType_t deviceType = DEVICE_TYPE_END_DEVICE;
bool rxOnWhenIdle = false;

//Set parameters <a class="xref" href="GUID-82CE14E4-8F7A-412D-87DD-80F7911C7F44.html">CS_WriteParameter</a>(CS_DEVICE_TYPE_ID,&amp;deviceType);
<a class="xref" href="GUID-82CE14E4-8F7A-412D-87DD-80F7911C7F44.html">CS_WriteParameter</a>(CS_RX_ON_WHEN_IDLE_ID, &amp;rxOnWhenIdle);
</pre>
</div>
</div>
<div class="topic nested1" aria-labelledby="TOPIC_G1F_QST_J5B__GUID-B1536A59-A03B-4A03-B1D0-0523DCC476E3" id="TOPIC_G1F_QST_J5B"><h2 class="title topictitle2" id="TOPIC_G1F_QST_J5B__GUID-B1536A59-A03B-4A03-B1D0-0523DCC476E3" style="">Handling the network PANID</h2><div class="body"><p class="p">There are two identifier for the network: extended PANID and short (also called network) PANID. The first taking 64-bit values is the main idetifier, while a 16-bit value for the second in most cases is generated randomly and is used in frame headers instead of the extended PANID to reduce overhead. The extended PANID is predefined with the CS_EXT_PANID parameter causing the coordinator to form a network with the PANID equal to this parameter and other nodes to join the network with the PANID equal to this parameter. If a router or an end device specifies <code class="ph codeph">0x0</code> for CS_EXT_PANID, then it will join the first suitable network.</p>
<p class="p">The short PANID can also be predefined on the coordinator, for example, when it has to be reset and restore connection to the same network after is powers on. In this case CS_NWK_PREDEFINED_PANID shall be set to <code class="ph codeph">1</code>. The parameters can be configured either in compile or run time. The following example shows the latter case:</p>
<pre class="pre">//Prepare variables 
bool predefPANID = true;
uint16_t nwkPANID = CPU_TO_LE16(0x1111); //Set to 16-bit value converted to little endian format
<a class="xref" href="GUID-82CE14E4-8F7A-412D-87DD-80F7911C7F44.html">CS_WriteParameter</a>(CS_NWK_PREDEFINED_PANID_ID,&amp;predefPANID); //Indicate that the PANID is predefined
<a class="xref" href="GUID-82CE14E4-8F7A-412D-87DD-80F7911C7F44.html">CS_WriteParameter</a>(CS_NWK_PANID_ID, &amp;nwkPANID); //Set the PANID value</pre>
</div>
</div>
<div class="topic nested1" aria-labelledby="TOPIC_SP4_MST_J5B__GUID-60A9CF55-0835-4741-A10A-766097DADCAD" id="TOPIC_SP4_MST_J5B"><h2 class="title topictitle2" id="TOPIC_SP4_MST_J5B__GUID-60A9CF55-0835-4741-A10A-766097DADCAD" style="">Stochastic and static addressing</h2><div class="body"><p class="p">The user can choose between stochastic and static addressing schemes to address nodes in the network by setting the CS_NWK_UNIQUE_ADDR parameter to <code class="ph codeph">0</code> or <code class="ph codeph">1</code>, respectively. Addressing scheme determines the method used for assigning a short (network) address for the device in the following way: in stochastic scheme a short address is chosen by the stack automatically during network start different from all existing addresses in the network, while in static addressing the value provided by the CS_NWK_ADDR parameter is used. In the latter case it is up to the user to ensure that all addresses assigned to nodes in the network are unique.</p>
</div>
</div>
</body>
</html>